module.exports=[32574,(a,b,c)=>{"use strict";b.exports=a.r(48385).vendored["react-ssr"].ReactServerDOMTurbopackClient},9309,a=>{"use strict";var b=a.i(86205),c=a.i(56610);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},72349,98658,a=>{"use strict";var b=a.i(7909);let c=(0,b.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>c],72349);let d=(0,b.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);a.s(["MessageSquare",()=>d],98658)},17336,a=>{"use strict";let b=(0,a.i(7909).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],17336)},74238,a=>{"use strict";var b=a.i(86205),c=a.i(54942),d=a.i(56610);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},38501,a=>{"use strict";let b=(0,a.i(7909).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],38501)},66008,a=>{"use strict";var b=a.i(86205),c=a.i(54942),d=a.i(63194);a.i(42680);var e=a.i(32325),f=a.i(26951),g=a.i(7298),h=a.i(9309),i=a.i(87637),j=a.i(74238),k=a.i(56610);function l({className:a,children:c,...d}){return(0,b.jsx)("div",{className:(0,k.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...d,children:c})}function m({className:a,children:c,...d}){return(0,b.jsx)("div",{className:(0,k.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted text-sm font-medium",a),...d,children:c})}var n=a.i(72349),o=a.i(38501),p=a.i(17336);let q=(0,a.i(7909).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var r=a.i(98658),s=a.i(91139),t=a.i(92861),u=a.i(19717);function v(){let a=(0,d.useParams)();(0,d.useRouter)();let k=a.id,{user:v}=(0,g.useAuthContext)(),{fetchGroup:w,joinGroup:x,leaveGroup:y,isLoading:z}=(0,e.useGroups)(),{messages:A,isLoading:B,error:C,isConnected:D,fetchMessages:E,sendMessage:F,markAsRead:G,clearMessages:H}=(0,f.useChat)(),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(!1),O=(0,c.useRef)(null),P=(0,c.useRef)(null);(0,c.useEffect)(()=>(k&&w(k).then(a=>{a&&(J(a),a.isMember&&(E(k),G(k)))}),()=>{H()}),[k,w,E,G,H]),(0,c.useEffect)(()=>{O.current&&O.current.scrollIntoView({behavior:"smooth"})},[A]);let Q=async()=>{try{await x(k);let a=await w(k);a&&(J(a),E(k),G(k)),u.toast.success("Joined group successfully!")}catch(a){u.toast.error("Failed to join group")}},R=async()=>{try{await y(k);let a=await w(k);a&&(J(a),H()),u.toast.success("Left group successfully!")}catch(a){u.toast.error("Failed to leave group")}},S=async a=>{if(a.preventDefault(),K.trim()&&!M){N(!0);try{await F(k,{message:K.trim(),type:"TEXT"}),L(""),G(k)}catch(a){u.toast.error("Failed to send message")}finally{N(!1)}}};return z||!I?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)(p.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):(0,b.jsx)("div",{className:"min-h-screen bg-background",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-6 flex items-center gap-4",children:[(0,b.jsx)(s.default,{href:"/groups",children:(0,b.jsxs)(i.Button,{variant:"ghost",size:"sm",children:[(0,b.jsx)(q,{className:"h-4 w-4 mr-2"}),"Back"]})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[(0,b.jsx)(n.Users,{className:"h-8 w-8 text-primary"}),I.name]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:I.description||"No description"})]}),I.isMember?(0,b.jsx)(i.Button,{variant:"destructive",onClick:R,children:"Leave Group"}):(0,b.jsx)(i.Button,{onClick:Q,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:"Join Group"})]}),C&&(0,b.jsx)("div",{className:"mb-4 p-4 rounded-md bg-destructive/10 border border-destructive/20 text-destructive",children:C}),I.isMember?(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsxs)(h.Card,{className:"h-[calc(100vh-200px)] flex flex-col",children:[(0,b.jsx)(h.CardHeader,{className:"border-b border-border/50",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(r.MessageSquare,{className:"h-5 w-5 text-primary"}),"Chat"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)("div",{className:`h-2 w-2 rounded-full ${D?"bg-green-500":"bg-red-500"}`}),(0,b.jsx)("span",{children:D?"Connected":"Disconnected"})]})]})}),(0,b.jsxs)(h.CardContent,{className:"flex-1 flex flex-col p-0",children:[(0,b.jsx)("div",{className:"flex-1 p-4 overflow-y-auto",ref:P,children:B&&0===A.length?(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsx)(p.Loader2,{className:"h-6 w-6 animate-spin text-primary"})}):0===A.length?(0,b.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(r.MessageSquare,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{children:"No messages yet. Start the conversation!"})]})}):(0,b.jsxs)("div",{className:"space-y-4",children:[A.map(a=>{let c=a.userId===v?.id;return(0,b.jsxs)("div",{className:`flex gap-3 ${c?"flex-row-reverse":""}`,children:[(0,b.jsx)(l,{className:"h-8 w-8",children:(0,b.jsx)(m,{children:a.user?.name?.charAt(0).toUpperCase()||"U"})}),(0,b.jsx)("div",{className:`flex-1 ${c?"text-right":""}`,children:(0,b.jsxs)("div",{className:`inline-block max-w-[70%] rounded-lg px-4 py-2 ${c?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,children:[(0,b.jsx)("p",{className:"text-sm font-medium mb-1 opacity-80",children:c?"You":a.user?.name||"Unknown"}),(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:a.message}),(0,b.jsx)("p",{className:"text-xs opacity-70 mt-1",children:(0,t.format)(new Date(a.createdAt),"HH:mm")})]})})]},a.id)}),(0,b.jsx)("div",{ref:O})]})}),(0,b.jsx)("form",{onSubmit:S,className:"border-t border-border/50 p-4",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(j.Input,{value:K,onChange:a=>L(a.target.value),placeholder:"Type a message...",disabled:M||!D,className:"flex-1",onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),S(a))}}),(0,b.jsx)(i.Button,{type:"submit",disabled:!K.trim()||M||!D,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:M?(0,b.jsx)(p.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(o.Send,{className:"h-4 w-4"})})]})})]})]})}),(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Group Info"})}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Privacy"}),(0,b.jsx)("p",{className:"font-medium",children:I.privacy})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Members"}),(0,b.jsxs)("p",{className:"font-medium",children:[I.memberCount||0," members"]})]})]})]})})]}):(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(r.MessageSquare,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"You must join this group to view and send messages."}),(0,b.jsx)(i.Button,{onClick:Q,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:"Join Group"})]})})]})})}a.s(["default",()=>v],66008)}];

//# sourceMappingURL=My%20Projects_mystic-john_96c60baf._.js.map