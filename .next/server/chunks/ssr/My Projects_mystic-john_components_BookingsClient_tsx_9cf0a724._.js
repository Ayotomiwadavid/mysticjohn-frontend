module.exports=[94440,a=>{"use strict";var b=a.i(86205),c=a.i(54942),d=a.i(63194),e=a.i(87637),f=a.i(9309),g=a.i(30194),h=a.i(48848),i=a.i(50519),j=a.i(4750),k=a.i(86288);a.i(42680);var l=a.i(19556),m=a.i(22942),n=a.i(937),o=a.i(84982),p=a.i(94),q=a.i(17336),r=a.i(68609),s=a.i(92861),t=a.i(38382),u=a.i(97295);function v(a,b,c){let d=(0,u.toDate)(a,c?.in);return isNaN(b)?(0,t.constructFrom)(c?.in||a,NaN):(b&&d.setDate(d.getDate()+b),d)}var w=a.i(51411),x=a.i(10243),y=a.i(19717);function z({open:a,onOpenChange:d,service:g}){let{fetchAvailability:h,createBooking:i,isLoading:j,error:t,clearError:u,availability:z}=(0,l.useBookings)(),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)("ONLINE"),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)([]),[K,L]=(0,c.useState)(!1);(0,c.useEffect)(()=>{a&&g&&(B(null),D(null),F("ONLINE"),J([]),u())},[a,g,u]),(0,c.useEffect)(()=>{if(A&&g){L(!0);let a=(0,s.format)(A,"yyyy-MM-dd");h(g.id,a)}else J([]),L(!1)},[A,g,h]),(0,c.useEffect)(()=>{if(z&&A){let a=(0,s.format)(A,"yyyy-MM-dd");z.date===a&&(J(z.slots||[]),L(!1))}},[z,A]);let M=async()=>{if(g&&A&&C){H(!0);try{let[a,b]=C.split(":").map(Number),c=new Date(A);c.setHours(a,b,0,0),await i({serviceId:g.id,startDateTime:c.toISOString(),type:E})&&(y.toast.success("Booking created successfully!"),d(!1))}catch(a){y.toast.error("Failed to create booking. Please try again.")}finally{H(!1)}}},N=(()=>{let a=[],b=new Date,c=(0,w.startOfWeek)(b,{weekStartsOn:1});for(let d=0;d<4;d++)for(let e=0;e<7;e++){let f=v(v(c,7*d,void 0),e);f>=b&&a.push(f)}return a.slice(0,28)})();return g?(0,b.jsx)(k.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(k.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsxs)(k.DialogTitle,{className:"text-2xl font-bold",children:["Book ",g.name]}),(0,b.jsx)(k.DialogDescription,{children:"Select a date and time for your appointment"})]}),t&&(0,b.jsx)("div",{className:"p-3 rounded-md bg-destructive/10 border border-destructive/20 text-destructive text-sm",children:t}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(f.Card,{className:"border-primary/20",children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-foreground",children:g.name}),g.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:g.description})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"text-2xl font-bold text-primary",children:["£",g.price]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[g.duration," minutes"]})]})]})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground mb-3",children:"Appointment Type"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)(e.Button,{type:"button",variant:"ONLINE"===E?"default":"outline",onClick:()=>{F("ONLINE"),D(null)},className:"h-auto py-4 flex flex-col items-center gap-2",children:[(0,b.jsx)(o.Video,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"Online"})]}),(0,b.jsxs)(e.Button,{type:"button",variant:"IN_PERSON"===E?"default":"outline",onClick:()=>{F("IN_PERSON"),D(null)},className:"h-auto py-4 flex flex-col items-center gap-2",children:[(0,b.jsx)(p.MapPin,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"In-Person"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"text-sm font-medium text-foreground mb-3 flex items-center gap-2",children:[(0,b.jsx)(m.Calendar,{className:"h-4 w-4"}),"Select Date"]}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-2 max-h-[200px] overflow-y-auto",children:N.map(a=>{let c=A&&(0,x.isSameDay)(a,A),d=(0,x.isSameDay)(a,new Date);return(0,b.jsxs)("button",{type:"button",onClick:()=>{B(a),D(null)},className:`
                      p-2 rounded-lg text-sm transition-all
                      ${c?"bg-primary text-primary-foreground font-semibold":"bg-muted hover:bg-muted/80 text-foreground"}
                      ${d&&!c?"ring-2 ring-primary/50":""}
                    `,children:[(0,b.jsx)("div",{className:"text-xs opacity-70",children:(0,s.format)(a,"EEE")}),(0,b.jsx)("div",{className:"font-medium",children:(0,s.format)(a,"d")})]},a.toISOString())})})]}),A&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"text-sm font-medium text-foreground mb-3 flex items-center gap-2",children:[(0,b.jsx)(n.Clock,{className:"h-4 w-4"}),"Select Time (",(0,s.format)(A,"MMM d, yyyy"),")"]}),K?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(q.Loader2,{className:"h-6 w-6 animate-spin text-primary"})}):0===I.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)("p",{children:"No available slots for this date."}),(0,b.jsx)("p",{className:"text-sm mt-1",children:"Please select another date."})]}):(0,b.jsx)("div",{className:"grid grid-cols-4 gap-2 max-h-[200px] overflow-y-auto",children:I.map(a=>{let c=C===a;return(0,b.jsxs)("button",{type:"button",onClick:()=>D(a),className:`
                          p-3 rounded-lg text-sm font-medium transition-all
                          ${c?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80 text-foreground"}
                        `,children:[c&&(0,b.jsx)(r.Check,{className:"h-4 w-4 inline-block mr-1"}),a]},a)})})]}),A&&C&&(0,b.jsx)(f.Card,{className:"border-primary/30 bg-primary/5",children:(0,b.jsxs)(f.CardContent,{className:"pt-6",children:[(0,b.jsx)("h4",{className:"font-semibold text-foreground mb-3",children:"Booking Summary"}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Service:"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:g.name})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Date:"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:(0,s.format)(A,"EEEE, MMM d, yyyy")})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Time:"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:C})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Type:"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:"ONLINE"===E?"Online":"In-Person"})]}),(0,b.jsxs)("div",{className:"flex justify-between pt-2 border-t border-border/50",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Total:"}),(0,b.jsxs)("span",{className:"font-bold text-primary text-lg",children:["£",g.price]})]})]})]})}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>d(!1),className:"flex-1",disabled:G,children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:M,disabled:!A||!C||G,className:"flex-1 bg-primary text-primary-foreground hover:bg-primary/90",children:G?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Booking..."]}):"Confirm Booking"})]})]})]})}):null}let A=(0,a.i(7909).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);function B(){let a=(0,d.useSearchParams)(),{services:k,isLoading:m,error:q,fetchServices:r}=(0,l.useBookings)(),[s,t]=(0,c.useState)("all"),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1);(0,c.useEffect)(()=>{r()},[r]),(0,c.useEffect)(()=>{let b="true"===a.get("book"),c=a.get("serviceId");if(b&&k.length>0&&!w)if(c){let a=k.find(a=>a.id===c);a&&(v(a),x(!0))}else v(k[0]),x(!0)},[a,k,w]);let y=k.filter(a=>!0);return(0,b.jsxs)(i.ProtectedRoute,{children:[(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(g.Navigation,{}),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)(h.DashboardSidebar,{}),(0,b.jsxs)("main",{className:"flex-1",children:[(0,b.jsxs)("section",{className:"relative overflow-hidden py-16 md:py-24",children:[(0,b.jsx)(j.MysticalSparkles,{}),(0,b.jsx)("div",{className:"container mx-auto px-4 relative z-10",children:(0,b.jsxs)("div",{className:"max-w-3xl mx-auto text-center space-y-4",children:[(0,b.jsx)("h1",{className:"text-4xl md:text-6xl font-bold text-foreground text-balance",children:"Book Your Session, Pal"}),(0,b.jsx)("p",{className:"text-xl text-muted-foreground text-pretty",children:"Choose in-person or online — whatever suits yer vibes."})]})})]}),(0,b.jsx)("section",{className:"py-8 border-b border-border/50",children:(0,b.jsx)("div",{className:"container mx-auto px-4",children:(0,b.jsxs)("div",{className:"flex flex-wrap justify-center gap-4",children:[(0,b.jsx)(e.Button,{variant:"all"===s?"default":"outline",onClick:()=>t("all"),className:"all"===s?"bg-primary text-primary-foreground":"border-primary/50 hover:bg-primary/10",children:"All Services"}),(0,b.jsxs)(e.Button,{variant:"online"===s?"default":"outline",onClick:()=>t("online"),className:"online"===s?"bg-primary text-primary-foreground":"border-primary/50 hover:bg-primary/10",children:[(0,b.jsx)(o.Video,{className:"h-4 w-4 mr-2"}),"Online Readings"]}),(0,b.jsxs)(e.Button,{variant:"in-person"===s?"default":"outline",onClick:()=>t("in-person"),className:"in-person"===s?"bg-primary text-primary-foreground":"border-primary/50 hover:bg-primary/10",children:[(0,b.jsx)(p.MapPin,{className:"h-4 w-4 mr-2"}),"In-Person Readings"]})]})})}),(0,b.jsx)("section",{className:"py-16",children:(0,b.jsx)("div",{className:"container mx-auto px-4",children:m?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading services..."})]})}):q?(0,b.jsxs)("div",{className:"text-center py-20",children:[(0,b.jsx)("p",{className:"text-destructive mb-4",children:q}),(0,b.jsx)(e.Button,{onClick:()=>r(),children:"Try Again"})]}):0===y.length?(0,b.jsx)("div",{className:"text-center py-20",children:(0,b.jsx)("p",{className:"text-muted-foreground text-lg",children:"No services available at the moment."})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:y.map(a=>(0,b.jsxs)(f.Card,{className:"border-border/50 hover:border-primary/50 transition-all duration-300 hover:shadow-lg hover:shadow-primary/20 relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-linear-to-br from-primary/20 to-accent/20 blur-2xl"}),(0,b.jsxs)(f.CardHeader,{className:"relative",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsx)(f.CardTitle,{className:"text-foreground text-xl",children:a.name}),(0,b.jsx)(o.Video,{className:"h-5 w-5 text-primary shrink-0"})]}),a.description&&(0,b.jsx)(f.CardDescription,{className:"text-muted-foreground leading-relaxed",children:a.description})]}),(0,b.jsx)(f.CardContent,{className:"relative",children:(0,b.jsxs)("div",{className:"space-y-3",children:[a.duration&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(n.Clock,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:[a.duration," minutes"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-border/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(A,{className:"h-5 w-5 text-primary"}),(0,b.jsxs)("span",{className:"text-2xl font-bold text-foreground",children:["£",a.price]})]}),(0,b.jsx)(e.Button,{size:"sm",className:"bg-primary text-primary-foreground hover:bg-primary/90",onClick:()=>{v(a),x(!0)},children:"Book Now"})]})]})})]},a.id))})})})]})]})]}),(0,b.jsx)(z,{open:w,onOpenChange:x,service:u})]})}a.s(["default",()=>B],94440)}];

//# sourceMappingURL=My%20Projects_mystic-john_components_BookingsClient_tsx_9cf0a724._.js.map